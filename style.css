:root{
  --bg:#ffeec9;
  --card:#fff7e6;
  --border:#e1b676;
  --shadow:rgba(0,0,0,.14);
  --text:#4b3044;
  --muted:#7a5a6a;
  --btn:#ffcc6a;
  --btn2:#ffdca0;
  --pink1:#ffd1f0;
  --pink2:#ffe6fa;
  --mask:rgba(0,0,0,.35);
  --dockH: 124px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  font-family:"Noto Sans TC",-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  color:var(--text);
  overflow:hidden;
}

.app{
  min-height: 100dvh;
  display:flex;
  flex-direction:column;
  padding-bottom: calc(var(--dockH) + env(safe-area-inset-bottom));
}

.header{padding:14px 14px 10px;}
.topbar{
  display:flex; gap:12px; align-items:center;
  padding:14px; border:2px solid var(--border);
  background:linear-gradient(180deg,#fff3d8,#fff7e6);
  border-radius:18px; box-shadow:0 8px 20px var(--shadow);
}
.logo{
  width:56px;height:56px;border-radius:16px;
  border:2px solid var(--border);
  background:#fff; overflow:hidden; flex:0 0 auto;
  display:flex; align-items:center; justify-content:center;
}
.logo img{width:100%;height:100%;object-fit:cover}
.title{flex:1;min-width:0}
.title h1{margin:0;font-size:18px;letter-spacing:.4px}
.title p{margin:6px 0 0; color:var(--muted); font-size:13px; line-height:1.35}

.main{
  flex:1;
  min-height:0;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  padding:0 14px 10px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.hero{
  border-radius:20px;
  overflow:hidden;
  border:2px solid var(--border);
  box-shadow:0 10px 24px var(--shadow);
  background:#fff;
  position:relative;
  min-height:260px;
  cursor:pointer;
  user-select:none;
  -webkit-touch-callout:none;
}
.hero, .hero *{
  -webkit-user-select:none;
  user-select:none;
}
.hero img{
  width:100%;height:100%;object-fit:cover;display:block;
  pointer-events:none;
  -webkit-user-drag:none;
}
.hero:active{
  transform: translateY(1px) scale(.995);
  filter: brightness(.99);
  transition: transform .08s ease, filter .15s ease;
}

.badge{
  position:absolute; left:10px; top:10px;
  background:rgba(255,247,230,.92);
  border:2px solid var(--border);
  padding:8px 10px; border-radius:999px;
  font-size:12px;
  box-shadow:0 6px 14px rgba(0,0,0,.10);
}

/* âœ… æ¼«ç•«æ°£æ³¡ï¼šæ”¾å·¦ä¸‹ï¼Œå°¾å·´æœå³ï¼ˆæŒ‡å‘ç†Šï¼‰ */
.comic-bubble{
  position:absolute;
  left:12px;
  right:92px;          /* âœ… å³é‚Šç•™ç©ºçµ¦æç¤ºï¼‹è®“å°¾å·´æ›´åƒæŒ‡å‘ç†Š */
  bottom:12px;

  background:rgba(255,255,255,.92);
  border:2px solid var(--border);
  border-radius:16px;
  padding:10px 12px;
  box-shadow:0 8px 18px rgba(0,0,0,.12);

  font-size:13px;
  line-height:1.55;
  white-space:pre-wrap;
  backdrop-filter: blur(2px);
  z-index:2;
}

/* âœ… å°¾å·´ï¼šåœ¨å³å´ï¼ŒæŒ‡å‘ç†Šï¼ˆåƒä½ ç¬¬äºŒå¼µåœ–ï¼‰ */
.comic-bubble:before{
  content:"";
  position:absolute;
  right:-8px;          /* âœ… å°¾å·´åœ¨å³é‚Š */
  bottom:18px;
  width:14px;
  height:14px;
  background:rgba(255,255,255,.92);
  border-right:2px solid var(--border);
  border-bottom:2px solid var(--border);
  transform:rotate(-45deg);
}

  background:rgba(255,255,255,.92);
  border:2px solid var(--border);
  border-radius:16px;
  padding:10px 12px;
  box-shadow:0 8px 18px rgba(0,0,0,.12);

  font-size:13px;
  line-height:1.55;
  white-space:pre-wrap;
  backdrop-filter: blur(2px);
}
.comic-bubble:before{
  content:"";
  position:absolute;
  left:18px;
  bottom:-8px;
  width:14px;height:14px;
  background:rgba(255,255,255,.92);
  border-left:2px solid var(--border);
  border-bottom:2px solid var(--border);
  transform:rotate(-45deg);
}

.tapHint{
  position:absolute;
  right:12px;
  bottom:12px;        /* âœ… æ”¹åˆ°å³ä¸‹è§’ */
  top:auto;           /* âœ… å–æ¶ˆ top */
  background:rgba(255,247,230,.92);
  border:2px dashed var(--border);
  padding:8px 10px;
  border-radius:999px;
  font-size:12px;
  box-shadow:0 6px 14px rgba(0,0,0,.08);
  z-index:3;
}

.row2{display:grid;grid-template-columns:1fr 1fr;gap:10px;}

.btn{
  appearance:none; border:none; cursor:pointer;
  background:linear-gradient(180deg,var(--btn),var(--btn2));
  border:2px solid var(--border);
  border-radius:16px;
  padding:12px 10px;
  font-size:14px;
  color:var(--text);
  box-shadow:0 6px 14px rgba(0,0,0,.10);
  display:flex; align-items:center; justify-content:center;
  gap:8px;
  user-select:none;
  transition:transform .08s ease, filter .15s ease;
}
.btn:active{transform:translateY(1px) scale(.99)}
.btn.secondary{background:#fff;}
.btn.ig{background:linear-gradient(180deg,var(--pink1),var(--pink2));}
.btn.small{padding:10px 10px; font-size:13px; border-radius:14px;}

.moodWrap{
  display:flex;
  gap:10px;
  align-items:flex-start;
  justify-content:space-between;
}
.moods{display:flex; gap:8px; align-items:center; flex-wrap:wrap;}
.mood-btn{
  border:none; cursor:pointer;
  background:#fff;
  border:2px solid var(--border);
  border-radius:999px;
  padding:8px 10px;
  font-size:13px;
  box-shadow:0 4px 10px rgba(0,0,0,.08);
  color:var(--text);
  user-select:none;
}
.mood-btn.active{background:linear-gradient(180deg,#fff0c8,#fff7e6);}
.mood-pill{
  font-size:12px;color:var(--muted);
  background:#fff; border:1px dashed var(--border);
  padding:6px 10px;border-radius:999px;
  white-space:nowrap;
  align-self:flex-start;
}

/* Dock */
.dock{
  position:fixed; left:0; right:0; bottom:0;
  z-index:70;
  padding:10px 14px calc(10px + env(safe-area-inset-bottom));
  background:rgba(255,247,230,.95);
  border-top:2px solid var(--border);
  box-shadow:0 -10px 24px rgba(0,0,0,.08);
}
.dock-inner{
  max-width:480px;margin:0 auto;
  display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;
}
.dock-inner.single{grid-template-columns:1fr; margin-top:10px;}

/* Toast */
.toast{
  position:fixed; left:50%; bottom:calc(var(--dockH) + 14px);
  transform:translateX(-50%);
  background:rgba(75,48,68,.92);
  color:#fff;
  padding:10px 12px;
  border-radius:999px;
  font-size:13px;
  opacity:0; pointer-events:none;
  transition:opacity .18s ease;
  max-width:92vw;
  text-align:center;
  z-index:92;
}
.toast.show{opacity:1}

/* Modal */
.modal-mask{
  position:fixed; inset:0;
  background:var(--mask);
  display:none;
  align-items:flex-end;
  z-index:80;
}
.modal-mask.show{display:flex;}
.modal{
  width:100%;
  max-width:480px;
  margin:0 auto;
  background:#fff;
  border:2px solid var(--border);
  border-bottom:none;
  border-radius:18px 18px 0 0;
  box-shadow:0 -12px 30px rgba(0,0,0,.22);
  padding:14px;
  max-height: 88dvh;
  overflow:hidden;
}
.modal-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  margin-bottom:10px;
}
.modal-head h3{margin:0;font-size:16px}
.xbtn{
  border:none; cursor:pointer;
  background:#fff;
  border:2px solid var(--border);
  border-radius:12px;
  padding:8px 10px;
  font-size:13px;
  box-shadow:0 4px 10px rgba(0,0,0,.08);
  user-select:none;
}

.drink-head{display:flex; gap:10px; align-items:flex-start; margin-top:4px;}
.emoji{
  width:44px;height:44px;border-radius:14px;
  border:2px solid var(--border);
  background:#fff7e6;
  display:flex;align-items:center;justify-content:center;
  font-size:24px;flex:0 0 auto;
}
.drink-meta{flex:1}
.drink-meta h4{margin:0;font-size:16px}
.tag{margin:6px 0 0;color:var(--muted);font-size:12px;line-height:1.4}
.pillline{
  margin-top:6px;
  font-size:12px;color:var(--muted);
  background:#fff;border:1px dashed var(--border);
  padding:6px 10px;border-radius:999px;
  display:inline-block;
}

.content{
  overflow:auto;
  max-height:58dvh;
  padding-right:4px;
  margin-top:10px;
  -webkit-overflow-scrolling: touch;
}

.block{margin-top:10px}
.label{font-size:12px;color:var(--muted);margin-bottom:4px}
.text{
  background:#fff7e6;
  border:1px solid rgba(225,182,118,.65);
  border-radius:12px;
  padding:10px;
  line-height:1.55;
  font-size:13px;
  white-space:pre-wrap;
}
.warn{background:#fff1f1;border:1px solid rgba(176,71,71,.35);color:#6a2b2b;}

.memo-wrap{display:flex; gap:8px; align-items:center; margin-top:6px;}
.memo-wrap input{
  flex:1;
  border:2px solid rgba(225,182,118,.7);
  border-radius:14px;
  padding:10px 12px;
  font-size:16px;
  outline:none;
  background:#fff;
}

.tabs{display:flex; gap:8px; margin:10px 0;}
.tab{
  flex:1;
  border:none; cursor:pointer;
  background:#fff;
  border:2px solid var(--border);
  border-radius:999px;
  padding:9px 10px;
  font-size:13px;
  box-shadow:0 4px 10px rgba(0,0,0,.08);
  user-select:none;
}
.tab.active{background:linear-gradient(180deg,#fff0c8,#fff7e6);}

.filters{display:flex;gap:8px;flex-wrap:wrap;margin:6px 0 10px;}
.filter-btn{
  border:none; cursor:pointer;
  background:#fff;
  border:2px solid rgba(225,182,118,.7);
  border-radius:999px;
  padding:7px 10px;
  font-size:12px;
  box-shadow:0 3px 8px rgba(0,0,0,.07);
  user-select:none;
}
.filter-btn.active{background:linear-gradient(180deg,#fff0c8,#fff7e6);}

.search{display:flex; gap:8px; align-items:center; margin:6px 0 10px;}
.search input{
  flex:1;
  border:2px solid rgba(225,182,118,.7);
  border-radius:14px;
  padding:10px 12px;
  font-size:16px;
  outline:none;
  background:#fff;
}

.item{
  border:2px solid rgba(225,182,118,.55);
  border-radius:14px;
  padding:10px;
  margin-bottom:10px;
  background:#fff7e6;
}
.item-top{display:flex; gap:10px; align-items:flex-start;}
.item-emoji{
  width:38px;height:38px;border-radius:12px;
  border:2px solid var(--border);
  background:#fff;
  display:flex;align-items:center;justify-content:center;
  font-size:20px; flex:0 0 auto;
}
.item h5{margin:0;font-size:14px}
.item .meta{margin-top:4px;font-size:12px;color:var(--muted);line-height:1.35}
.item-actions{display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;}
.smallnote{
  margin-top:10px;
  color:var(--muted);
  font-size:12px;
  line-height:1.5;
  text-align:center;
}
/* ğŸ» æ¼«ç•«å°è©±æ¡†ï¼šåœ¨ç†Šä¸Šæ–¹ï¼Œåƒç†Šåœ¨èªªè©± */
.comic-bubble{
  position:absolute;
  left:16px;
  right:16px;
  bottom:92px;              /* â¬…ï¸ åœ¨ç†Šåœ–ç‰‡ä¸Šæ–¹ */
  background:#fff;
  border:2px solid var(--border);
  border-radius:16px;
  padding:10px 12px;
  font-size:13px;
  line-height:1.55;
  box-shadow:0 8px 18px rgba(0,0,0,.12);
  z-index:3;
}

/* å°¾å·´ï¼šå¾€ä¸‹æŒ‡ç†Š */
.comic-bubble::after{
  content:"";
  position:absolute;
  left:48px;                /* â¬…ï¸ å°é½Šç†Šè‡‰åå·¦ */
  bottom:-8px;
  width:14px;
  height:14px;
  background:#fff;
  border-left:2px solid var(--border);
  border-bottom:2px solid var(--border);
  transform:rotate(-45deg);
}

/* ğŸ‡ å¾®é†ºé…’çª–ï¼šç§»åˆ°æœ€ä¸‹é¢ï¼Œåƒè³‡è¨Šæ¨™ç±¤ */
.badge{
  position:absolute;
  left:12px;
  bottom:12px;              /* â¬…ï¸ è·‘åˆ°æœ€ä¸‹é¢ */
  top:auto;
  background:rgba(255,247,230,.95);
  border:2px solid var(--border);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
  z-index:2;
}

/* Loading */
.loading{
  position:fixed; inset:0;
  background:rgba(255,238,201,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:95;
  backdrop-filter: blur(2px);
}
.loading.show{display:flex;}
.load-card{
  width:min(360px, 92vw);
  background:#fff;
  border:2px solid var(--border);
  border-radius:18px;
  box-shadow:0 12px 30px rgba(0,0,0,.18);
  padding:14px;
  text-align:center;
}
.load-bear{
  width:84px;height:84px;border-radius:24px;
  border:2px solid var(--border);
  overflow:hidden;
  margin:0 auto 10px;
  background:#fff;
  animation:bob 1.1s ease-in-out infinite;
}
.load-bear img{width:100%;height:100%;object-fit:cover}
@keyframes bob{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
.load-text{font-size:14px;line-height:1.5;}
.load-sub{color:var(--muted);font-size:12px;}
.dots{display:flex; gap:6px; justify-content:center; margin-top:10px;}
.dot{width:8px;height:8px;border-radius:999px;background:rgba(75,48,68,.7);animation:blink 1s infinite ease-in-out;}
.dot:nth-child(2){animation-delay:.15s}
.dot:nth-child(3){animation-delay:.3s}
@keyframes blink{0%,100%{transform:translateY(0);opacity:.35}50%{transform:translateY(-6px);opacity:1}}

/* âœ… ç–Šå±¤ä¿éšª */
#listMask{ z-index:80; }
#drinkMask{ z-index:90; }
#toast{ z-index:92; }
#loading{ z-index:95; }