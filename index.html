<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>找微醺熊講心事 🐻🍷</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#ffeec9" />
  <link rel="icon" sizes="192x192" href="icons/tipsy-bear-192.png">
  <link rel="apple-touch-icon" href="icons/tipsy-bear-512.png">

  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="app">
    <header class="header">
      <!-- ✅ 最上方主題：IG 連結按鈕 -->
      <a id="btnIGTop" class="top-ig-btn" href="https://instagram.com/luckygbear" target="_blank" rel="noopener">
        <!-- ✅ 加上 id，讓 app.js 容錯路徑可以套到這張 -->
        <img id="bearIconTop" class="top-ig-icon" src="images/tipsy-bear.png" alt="微醺熊" />
        <div class="top-ig-text">
          <div class="top-ig-title">找微醺熊聊心事 🐻🍷</div>
          <div class="top-ig-sub">點我去 IG，跟熊熊聊聊</div>
        </div>
        <div class="top-ig-arrow">›</div>
      </a>
    </header>

    <main class="main">
      <!-- （可選）顯示收錄數徽章：app.js 會自動寫入文字 -->
      <div class="badge" id="countBadge" aria-hidden="true"></div>

      <!-- ✅ 熊主視覺卡片：圖片 + 氣泡 -->
      <div class="hero-card" id="heroTap">
        <div class="hero-media">
          <img id="bearHeroImg" class="hero-img" src="images/tipsy-bear.png" alt="tipsy bear" />

          <div id="comicBubble" class="comic-bubble over-bear" tabindex="0" role="button" aria-label="點一下換一句">
            🐻「你來了就好，我在。」
          </div>

          <div class="hero-hint">☝️ 點熊熊或氣泡換一句</div>
        </div>
      </div>

      <!-- ✅ 只留兩個主操作 -->
      <section class="row2">
        <button class="btn" id="btnRandom">🎲 隨機一杯</button>
        <button class="btn secondary" id="btnPickList">📚 酒清單</button>
      </section>

      <!-- 🎉 派對小遊戲 -->
      <div class="party-wrap">
        <div class="party-title">🎉 派對小遊戲（好友一起玩）</div>

        <div class="party-grid3">
          <button class="btn small secondary" id="btnPartyTruth">💬 真心話</button>
          <button class="btn small secondary" id="btnPartyDare">🎯 大冒險</button>
          <button class="btn small" id="btnPartyRandom">🎲 隨機模式</button>
        </div>

        <div class="party-note">不想做就按「下一題」換掉就好 🤍</div>
      </div>

      <!-- ✅ 心情只留 3 種 -->
      <section class="moodWrap">
        <div class="moods" id="moodRow">
          <button class="mood-btn" data-mood="放鬆">😮‍💨 放鬆</button>
          <button class="mood-btn" data-mood="聊聊">🗣️ 聊聊</button>
          <button class="mood-btn" data-mood="慶祝">🎉 慶祝</button>
        </div>
        <div class="mood-pill" id="moodPill">未選擇</div>
      </section>

      <!-- ✅ 安裝 -->
      <div class="dock-inner single">
        <button class="btn small" id="btnInstall" style="display:none;">📲 加到主畫面</button>
      </div>
    </main>
  </div>

  <!-- Loading -->
  <div class="loading" id="loading" aria-hidden="true">
    <div class="load-card">
      <div class="load-bear"><img id="loadBear" alt="微醺熊"></div>
      <div class="load-text">
        🐻「我在酒窖幫你挑一杯…」<br>
        <span class="load-sub">（小提醒：慢慢喝最幸福）</span>
      </div>
      <div class="dots" aria-hidden="true">
        <div class="dot"></div><div class="dot"></div><div class="dot"></div>
      </div>
    </div>
  </div>

  <!-- 酒卡 Modal -->
  <div class="modal-mask" id="drinkMask">
    <div class="modal">
      <div class="modal-head">
        <h3 id="drinkTitle">今晚的一杯</h3>
        <button class="xbtn" id="drinkClose">關閉 ✕</button>
      </div>

      <div class="drink-head">
        <div class="emoji" id="drinkEmoji">🍷</div>
        <div class="drink-meta">
          <h4 id="drinkName">—</h4>
          <div class="tag" id="drinkTag">—</div>
          <div class="pillline" id="drinkMoodLine" style="display:none;"></div>
        </div>
      </div>

      <div class="content">
        <div class="block">
          <div class="label">📖 今晚的故事</div>
          <div class="text" id="drinkStory">—</div>
        </div>

        <div class="block">
          <div class="label">👃 風味一句話</div>
          <div class="text" id="drinkFlavor">—</div>
        </div>

        <div class="block">
          <div class="label">🧸 熊熊追問</div>
          <div class="text" id="drinkFollow">—</div>
        </div>

        <div class="block">
          <div class="label">⚠️ 安全提醒</div>
          <div class="text warn" id="drinkWarn">—</div>
        </div>

        <div class="block">
          <div class="label">📝 今晚我想記住</div>
          <div class="memo-wrap">
            <input id="memoInput" placeholder="輸入一句想記住的心情（最多 60 字）" maxlength="60" />
            <button class="btn small" id="btnSaveMemo">保存</button>
          </div>
        </div>
      </div>

      <div class="row2" style="margin-top:10px;">
        <button class="btn small" id="btnFav">⭐ 收藏</button>
        <button class="btn small secondary" id="btnCopy">📋 複製今晚卡片</button>
      </div>

      <div class="smallnote">未滿 18 請勿飲酒｜喝酒不開車｜小口慢慢喝</div>
    </div>
  </div>

  <!-- 清單/歷史/收藏 -->
  <div class="modal-mask" id="listMask">
    <div class="modal">
      <div class="modal-head">
        <h3 id="listTitle">📚 酒清單</h3>
        <button class="xbtn" id="listClose">關閉 ✕</button>
      </div>

      <div class="tabs">
        <button class="tab active" id="tabCatalog">📚 酒清單</button>
        <button class="tab" id="tabHistory">🕰️ 紀錄</button>
        <button class="tab" id="tabFav">⭐ 收藏</button>
      </div>

      <div class="filters" id="filterRow">
        <button class="filter-btn active" data-cat="all">全部</button>
        <button class="filter-btn" data-cat="beer">啤酒</button>
        <button class="filter-btn" data-cat="red">紅酒</button>
        <button class="filter-btn" data-cat="white">白酒</button>
        <button class="filter-btn" data-cat="spirit">烈酒</button>
        <button class="filter-btn" data-cat="cocktail">調酒</button>
        <button class="filter-btn" data-cat="na">無酒精</button>
      </div>

      <div class="search" id="searchRow">
        <input id="searchInput" placeholder="搜尋酒名（例如：莫希托 / 威士忌 / 梅酒）" />
        <button class="btn small secondary" id="btnSearchClear">清除</button>
      </div>

      <div class="content" id="listContent" style="max-height:64dvh;"></div>

      <div class="row2" style="margin-top:10px;">
        <button class="btn small secondary" id="btnClearHistory">清空紀錄</button>
        <button class="btn small secondary" id="btnClearFav">清空收藏</button>
      </div>

      <div class="smallnote">點「打開」會顯示那杯酒的卡片。</div>
    </div>
  </div>

<!-- 派對小遊戲 Modal -->
<div class="modal-mask" id="partyMask">
  <div class="modal">
    <div class="modal-head">
      <h3 id="partyTitle">🎉 派對小遊戲</h3>
      <button class="xbtn" id="partyClose">關閉 ✕</button>
    </div>

    <!-- ✅ 新增：可捲動區 -->
    <div class="party-scroll">

      <div class="chat-row">
        <div class="avatar"><img id="partyAvatar" alt="微醺熊"></div>
        <div style="flex:1">
          <div class="bubble" id="partyBearLine" title="點我換一句 🐻">🐻「玩輕鬆的就好，不想做就換題！」</div>
          <div class="bubble-tip">（點熊熊話語可以換一句）</div>
        </div>
      </div>

      <div class="party-task">
        <div class="party-type" id="partyType">—</div>
        <div class="party-card" id="partyTask">—</div>
      </div>

      <div class="party-toggle">
        <label class="toggle">
          <input type="checkbox" id="partyAlcohol">
          <span class="toggle-ui"></span>
          <span class="toggle-text">🍸 酒精模式（更嗨但仍安全）</span>
        </label>
      </div>

      <div class="row2" style="margin-top:10px;">
        <button class="btn small" id="partyNext">🔄 下一題</button>
        <button class="btn small secondary" id="partyCopy">📋 複製題目</button>
      </div>

      <div class="smallnote">未滿 18 請勿飲酒｜喝酒不開車｜不喝也能玩得很開心</div>
    </div>
  </div>

  <div class="toast" id="toast">已複製</div>

  <script src="app.js"></script>
</body>
</html>